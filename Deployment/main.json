{
	"$schema": "https://schema.management.azure.com/schemas/2018-05-01/subscriptionDeploymentTemplate.json#",
	"contentVersion": "1.0.0.0",
	"parameters": {
		"resourceGroupName": {
			"type": "string",
			"defaultValue": "myResourceGroup",
			"metadata": {
				"description": "Name of the resource group to create or use."
			}
		},
		"resourcePrefix": {
			"type": "string",
			"defaultValue": "loan1",
			"metadata": {
				"description": "Prefix for all resources."
			}
		}
	},
	"variables": {
		"resourceToken": "[toLower(uniqueString(subscription().id, parameters('resourcePrefix'), parameters('resourceGroupName')))]",
		"rgName": "[format('rg-{0}', parameters('resourcePrefix'))]"
	},
	"resources": [
		{
			"type": "Microsoft.Resources/resourceGroups",
			"apiVersion": "2021-04-01",
			"name": "[variables('rgName')]",
			"location": "[resourceGroup().location]"
		},
		{
			"type": "Microsoft.Resources/deployments",
			"apiVersion": "2019-10-01",
			"name": "mainDeployment",
			"properties": {
				"mode": "Incremental",
				"templateLink": {
					"uri": "https://raw.githubusercontent.com/gailzmicrosoft/MortgageApp/Deployment/main.bicep",
					"contentVersion": "1.0.0.0"
				},
				"parameters": {
					"resourceGroupName": {
						"value": "[parameters('resourceGroupName')]"
					},
					"resourcePrefix": {
						"value": "[parameters('resourcePrefix')]"
					},
					"storageAccountName": {
						"value": "[concat(parameters('resourcePrefix'), 'StorageAccount')]"
					},
					"appServiceName": {
						"value": "[concat(parameters('resourcePrefix'), 'AppService')]"
					},
					"formRecognizerName": {
						"value": "[concat(parameters('resourcePrefix'), 'FormRecognizer')]"
					},
					"appConfigName": {
						"value": "[concat(parameters('resourcePrefix'), 'AppConfig')]"
					}
				}
			}
		}
	]
}
